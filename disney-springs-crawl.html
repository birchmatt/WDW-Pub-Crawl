<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disney Springs Pub Crawl</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #7c3aed 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 15px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.3); 
            overflow: hidden; 
        }
        .header { 
            background: linear-gradient(135deg, #1e3a8a 0%, #7c3aed 100%); 
            color: white; 
            padding: 30px; 
        }
        .header h1 { font-size: 2em; margin-bottom: 10px; }
        .header p { opacity: 0.9; }
        .content { padding: 30px; }
        .location-item { 
            background: white; 
            padding: 20px; 
            border-radius: 10px; 
            border-left: 5px solid #e9ecef; 
            margin-bottom: 15px; 
        }
        .location-item.visited { 
            border-left-color: #10b981; 
            background: #f0fdf4; 
        }
        .location-name { 
            font-weight: 600; 
            color: #333; 
            font-size: 1.1em; 
            margin-bottom: 10px; 
        }
        .btn { 
            padding: 12px 30px; 
            border: none; 
            border-radius: 8px; 
            font-size: 1em; 
            font-weight: 600; 
            cursor: pointer; 
            background: linear-gradient(135deg, #1e3a8a 0%, #7c3aed 100%); 
            color: white; 
            margin-top: 10px;
            width: 100%;
        }
        .btn:active {
            transform: scale(0.98);
        }
        .form-group { margin-bottom: 20px; }
        .form-group label { 
            display: block; 
            margin-bottom: 8px; 
            color: #555; 
            font-weight: 600; 
        }
        .form-group select, .form-group input, .form-group textarea { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #ddd; 
            border-radius: 8px; 
            font-size: 1em; 
        }
        .drink-item { 
            background: white; 
            padding: 20px; 
            border-radius: 10px; 
            margin-bottom: 15px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        .drink-photo {
            max-width: 100%;
            border-radius: 8px;
            margin: 10px 0;
            cursor: pointer;
        }
        .progress-bar { 
            background: #e9ecef; 
            height: 30px; 
            border-radius: 15px; 
            overflow: hidden; 
            margin: 15px 0; 
        }
        .progress-fill { 
            background: linear-gradient(90deg, #7c3aed 0%, #1e3a8a 100%); 
            height: 100%; 
            color: white; 
            font-weight: bold; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            transition: width 0.3s;
        }
        .photo-preview {
            margin-top: 10px;
        }
        .photo-preview img {
            max-width: 200px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Disney Springs Pub Crawl</h1>
            <p>Track your journey through Disney Springs!</p>
        </div>
        
        <div class="content">
            <h2>Your Progress</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%">0/6 locations</div>
            </div>
            
            <div id="locationList"></div>
            
            <h2 style="margin-top: 30px;">Add Drink</h2>
            <form id="drinkForm">
                <div class="form-group">
                    <label>Location</label>
                    <select id="location" required>
                        <option value="">Choose location...</option>
                        <option value="0">Jaleo by Jose Andres</option>
                        <option value="1">Jock Lindseys Hangar Bar</option>
                        <option value="2">The Boathouse</option>
                        <option value="3">Raglan Road</option>
                        <option value="4">Morimoto Asia</option>
                        <option value="5">Dockside Margaritas</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Drink Name</label>
                    <input type="text" id="drinkName" required placeholder="Enter drink name">
                </div>
                
                <div class="form-group">
                    <label>Rating (1-10)</label>
                    <input type="number" id="rating" min="1" max="10" required value="5">
                </div>
                
                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="notes" placeholder="How was it?"></textarea>
                </div>
                
                <div class="form-group">
                    <label>ðŸ“¸ Photo (optional)</label>
                    <input type="file" id="photo" accept="image/*" style="display: block; width: 100%; padding: 10px; border: 2px dashed #7c3aed; border-radius: 8px; background: #f5f3ff; cursor: pointer;">
                    <div id="photoPreview" class="photo-preview" style="display: none;">
                        <img id="previewImg">
                        <button type="button" onclick="clearPhoto()" style="padding: 8px 16px; background: #dc3545; color: white; border: none; border-radius: 8px; margin-top: 8px; cursor: pointer;">Remove Photo</button>
                    </div>
                </div>
                
                <button type="submit" class="btn">Add Drink</button>
            </form>
            
            <h2 style="margin-top: 30px;">Your Drinks</h2>
            <div id="drinksList"></div>
        </div>
    </div>

    <script>
        const LOCATIONS = [
            'Jaleo by Jose Andres',
            'Jock Lindseys Hangar Bar',
            'The Boathouse',
            'Raglan Road',
            'Morimoto Asia',
            'Dockside Margaritas'
        ];

        let drinks = [];
        let currentPhotoData = null;

        function loadData() {
            try {
                const saved = localStorage.getItem('springsCrawl');
                if (saved) {
                    drinks = JSON.parse(saved);
                }
            } catch (e) {
                console.error('Error loading data:', e);
                drinks = [];
            }
        }

        function saveData() {
            try {
                localStorage.setItem('springsCrawl', JSON.stringify(drinks));
            } catch (e) {
                console.error('Error saving data:', e);
                alert('Error saving data. Your storage may be full.');
            }
        }

        function updateDisplay() {
            const visited = new Set(drinks.map(d => d.locationIndex));
            const progress = Math.round((visited.size / 6) * 100);
            
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressFill').textContent = visited.size + '/6 locations';
            
            let locationHTML = '';
            for (let i = 0; i < LOCATIONS.length; i++) {
                const isVisited = visited.has(i);
                locationHTML += '<div class="location-item' + (isVisited ? ' visited' : '') + '">';
                locationHTML += '<div class="location-name">' + (i + 1) + '. ' + LOCATIONS[i] + '</div>';
                if (isVisited) {
                    locationHTML += '<div style="color: #10b981; font-weight: 600;">âœ“ Visited</div>';
                }
                locationHTML += '</div>';
            }
            document.getElementById('locationList').innerHTML = locationHTML;
            
            if (drinks.length === 0) {
                document.getElementById('drinksList').innerHTML = '<p style="color: #999; text-align: center; padding: 40px;">No drinks yet!</p>';
            } else {
                let drinksHTML = '';
                const sortedDrinks = drinks.slice().reverse();
                for (let i = 0; i < sortedDrinks.length; i++) {
                    const d = sortedDrinks[i];
                    drinksHTML += '<div class="drink-item">';
                    drinksHTML += '<strong>' + d.drinkName + '</strong><br>';
                    drinksHTML += '<span style="color: #666;">' + LOCATIONS[d.locationIndex] + '</span><br>';
                    drinksHTML += '<span style="color: #fbbf24;">' + 'â˜…'.repeat(d.rating) + '</span><br>';
                    if (d.photo) {
                        drinksHTML += '<img src="' + d.photo + '" class="drink-photo" onclick="openPhotoModal(' + d.id + ')">';
                    }
                    if (d.notes) {
                        drinksHTML += '<em>' + d.notes + '</em><br>';
                    }
                    drinksHTML += '<button onclick="deleteDrink(' + d.id + ')" style="background: #dc3545; padding: 8px 16px; font-size: 0.9em; border: none; color: white; border-radius: 8px; margin-top: 10px; cursor: pointer;">Delete</button>';
                    drinksHTML += '</div>';
                }
                document.getElementById('drinksList').innerHTML = drinksHTML;
            }
        }

        document.getElementById('photo').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    currentPhotoData = event.target.result;
                    document.getElementById('previewImg').src = currentPhotoData;
                    document.getElementById('photoPreview').style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        function clearPhoto() {
            currentPhotoData = null;
            document.getElementById('photo').value = '';
            document.getElementById('photoPreview').style.display = 'none';
        }

        document.getElementById('drinkForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const locationValue = document.getElementById('location').value;
            const drinkNameValue = document.getElementById('drinkName').value;
            const ratingValue = document.getElementById('rating').value;
            const notesValue = document.getElementById('notes').value;
            
            if (!locationValue || !drinkNameValue || !ratingValue) {
                alert('Please fill in all required fields!');
                return;
            }
            
            const drink = {
                id: Date.now(),
                locationIndex: parseInt(locationValue),
                drinkName: drinkNameValue,
                rating: parseInt(ratingValue),
                notes: notesValue,
                photo: currentPhotoData
            };
            
            drinks.push(drink);
            saveData();
            
            document.getElementById('drinkForm').reset();
            clearPhoto();
            updateDisplay();
            alert('Drink added successfully!');
        });

        function deleteDrink(id) {
            if (confirm('Delete this drink?')) {
                drinks = drinks.filter(function(d) { return d.id !== id; });
                saveData();
                updateDisplay();
            }
        }

        function openPhotoModal(drinkId) {
            const drink = drinks.find(function(d) { return d.id === drinkId; });
            if (drink && drink.photo) {
                const modal = document.createElement('div');
                modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 20px;';
                modal.onclick = function() { document.body.removeChild(modal); };
                
                const img = document.createElement('img');
                img.src = drink.photo;
                img.style.cssText = 'max-width: 100%; max-height: 100%; border-radius: 8px;';
                
                modal.appendChild(img);
                document.body.appendChild(modal);
            }
        }

        loadData();
        updateDisplay();
    </script>
</body>
</html>